name: Auto Commit

on:
  schedule:
    - cron: "0 */2 * * *"

permissions:
  contents: write

jobs:
  auto_commit:
    runs-on: ubuntu-latest
    steps:
      - name: Debug Ref
        run: echo "::debug::Ref = ${{ github.ref }}"

      - name: Checkout Repository
        uses: actions/checkout@v3
        with:
          persist-credentials: false
          fetch-depth: 0

      - name: Update Timestamp
        run: |
          date -u '+%Y-%m-%dT%H:%M:%SZ' > LAST_UPDATED

      - name: Commit Changes
        run: |
          git config --local user.email "tuanductran.dev@gmail.com"
          git config --local user.name "tuanductran"
          git add -A

          morning=(
            "chore(bot): ğŸŒ… Sunrise brings fresh updates"
            "chore(bot): ğŸ© Sweet morning break, sweet commit"
            "chore(bot): ğŸ“š Reading paused for a repository update"
            "chore(bot): ğŸš¶ Gentle stroll, steady commit"
          )

          daytime=(
            "chore(bot): ğŸ›‹ï¸ Comfortable midday commit"
            "chore(bot): ğŸ” Lunch break update"
            "chore(bot): ğŸ¦ Ice cream in one hand, commit in the other"
            "chore(bot): ğŸµ Background music, foreground commit"
            "chore(bot): ğŸ“º Quick update between streaming sessions"
            "chore(bot): ğŸ¹ Casual commit during a lazy break"
          )

          afternoon=(
            "chore(bot): ğŸŒ¸ Calm and unhurried commit"
            "chore(bot): ğŸ›‹ï¸ Relaxed afternoon update"
            "chore(bot): ğŸš¶ Slow-paced commit executed"
            "chore(bot): ğŸ• Pizza-powered update"
            "chore(bot): ğŸ“º Paused a show to commit updates"
          )

          evening=(
            "chore(bot): ğŸ¥± Low-energy evening update"
            "chore(bot): ğŸ® Pausing the game for a short commit"
            "chore(bot): ğŸ“š Book break interrupted for a quick commit"
            "chore(bot): ğŸŒ´ Vacation mood, but code still delivered"
            "chore(bot): ğŸ›‹ï¸ Lounging with a light commit"
          )

          night=(
            "chore(bot): ğŸŒ™ Night shift commit, keeping the repo alive"
            "chore(bot): ğŸ’¤ Automated commit triggered during idle hours"
            "chore(bot): ğŸ¥± Commit generated while the bot was dozing off"
            "chore(bot): ğŸ˜´ Sleep mode activated, but code still updated"
            "chore(bot): ğŸ›Œ Under the covers, yet updates continue"
            "chore(bot): ğŸ›ï¸ Late-night commit before shutting down"
            "chore(bot): ğŸ¥± Twilight commit before sleep"
            "chore(bot): ğŸŒ™ Night owl commit, keeping things running"
          )

          randoms=(
            "chore(bot): ğŸš« Procrastination complete, commit delivered"
            "chore(bot): ğŸš« Avoiding tasks, but not this commit"
            "chore(bot): ğŸ’¤ Background task, foreground commit"
            "chore(bot): ğŸ˜´ Dreaming of stable code, committing anyway"
            "chore(bot): ğŸ¥± Quick commit made in pajamas"
            "chore(bot): ğŸ¥± Fighting drowsiness with a commit"
            "chore(bot): ğŸ” Food coma couldnâ€™t stop this commit"
            "chore(bot): ğŸ• Extra slice, extra commit"
            "chore(bot): ğŸ® Game break turned into code push"
            "chore(bot): ğŸ“º Dual-tasking: streaming and committing"
          )

          hour=$(date -u +"%H")
          if [ $hour -ge 5 ] && [ $hour -lt 11 ]; then
            pool=("${morning[@]}")
          elif [ $hour -ge 11 ] && [ $hour -lt 15 ]; then
            pool=("${daytime[@]}")
          elif [ $hour -ge 15 ] && [ $hour -lt 18 ]; then
            pool=("${afternoon[@]}")
          elif [ $hour -ge 18 ] && [ $hour -lt 22 ]; then
            pool=("${evening[@]}")
          else
            pool=("${night[@]}")
          fi

          if [ $((RANDOM % 5)) -eq 0 ]; then
            pool+=("${randoms[@]}")
          fi

          msg=${pool[$RANDOM % ${#pool[@]}]}
          git commit -m "$msg"

      - name: Push to GitHub
        uses: ad-m/github-push-action@master
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
        env:
          CI: true
